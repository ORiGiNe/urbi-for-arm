%%
%% BNF grammars.
%%

\ifx\ifHtml\undefined
\newcommand{\ebnf@eq}{%
  \keywordstyle{\raisebox{+.15ex}{:\kern-0.27em:}\kern-0.1em=}%
}
\newcommand{\ebnf@exp}[1]{%
  \keywordstyle{${}^{#1}$}%
}
\newcommand{\ebnf@star}{%
  \ebnf@exp{\star}%
}
\else
\newcommand{\ebnf@eq}{%
  \keywordstyle{::=}%
}
\newcommand{\ebnf@exp}[1]{%
  \keywordstyle{$#1$}%
}
\newcommand{\ebnf@star}{%
  \ebnf@exp{*}%
}
\fi

%% Not using otherkeywords for "(" and ")" and the like because it
%% also applies inside the strings.
\lstdefinelanguage{bnf}
  {morestring=[b]",
   literate=*%
     {<}{$\langle$}1
     {>}{$\rangle$}1
     {(}{{\keywordstyle{$($}}}1
     {)}{{\keywordstyle{$)$}}}1
     {::=}{{\ebnf@eq}}1
     {*}{{\ebnf@star}}1
     {+}{{\ebnf@exp{+}}}1
     {?}{{\ebnf@exp{?}}}1,
   morecomment=[l]\#
  }[strings,comments,keywords]

%% Local Variables:
%% mode: LaTeX
%% End:
